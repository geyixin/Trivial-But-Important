# PING相关内容

## 定义，作用

+ PING：分组网间探测，Packet Internet Groper
+ 作用：测试两台主机之间的连通性
+ PING是应用层直接使用网络层ICMP的一个例子，并未涉及运输层的TCP或UDP
## 工作原理
### 两台主机在同一局域网
+ 在主机 A 上运行Ping 192.168.0.5”后：首先，Ping 命令会构建一个 固定格式的 ICMP 请求数据包， 然后由 ICMP 协议将这个数据包连同地址“192.168.0.5”一起 交给IP层，IP 层将以地址 “192.168.0.5”作为目的地址，本机 IP 地址作为源地址，加上一些其他的控制信息，构建一 个 IP 数据包，并想办法得到 192.168.0.5 的MAC 地址，以便交给数据链路层构建一个数据帧。当IP 层通过主机B 的 IP 地址和自己的子网掩码，发现它跟自己属同一网络，就直接在本网络内查找这台机器的 MAC，如果以前两机有过通信，在 A 机的 ARP 缓存表应该 有 B 机 IP 与其 MAC 的映射关系，如果没有，就发一个 ARP 请求广播，得到 B 机的 MAC，一并交给数据链路层，并形成一个数据帧，目的地址是 IP 层传过来的物理地址，源地址是本机的物理地址，还要附加上一些控制信息，依据以太网的介质访问规则，将它们传送 出去。 主机 B 收到这个数据帧后，先检查它的目的地址，并和本机的物理地址对比，如符合， 则接收；否则丢弃。接收后检查该数据帧，将 IP 数据包从帧中提取出来，交给本机的 IP 层。同样，IP 层检查后，将有用的信息提取后交给 ICMP 协议，后者处理后，马上构建 一个 ICMP 应答包，发送给主机 A，其过程和主机 A 发送 ICMP 请求包到主机 B 一模一样。
+ 上图分析：
![两台主机在同一局域网找MAC地址](https://github.com/geyixin/Trivial-But-Important/blob/master/PING.png)

### 两台主机不在同一局域网
+ 在主机 A 上运行“Ping 192.168.1.4”后，开始跟上面一样，到了怎样得到 MAC 地址时，IP 协议通过计算发现 D 机与自己不在同一网段内，就直接将交由路由处理，也就是将路由的 MAC 取过来，至于怎样得到路由的 MAC，跟上面一样，先在 ARP 缓存表找，找不到就广 播。路由得到这个数据帧后，再跟主机 D 进行联系，如果找不到，就向主机 A 返回一个 超时的信息。


# 上网发生故障

# DNS实现过程

# 应用层的HTTP流程，几从上到小的报文变化情况。

# 什么是网关？作用？网路中IP分组如何实现数据传输。

# 什么是Vlan？功能？

# TCP和UDP区别？TCP优点？如何保证可靠性？TCP的应用？
